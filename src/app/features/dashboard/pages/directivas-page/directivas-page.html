<!-- MAIN CONTENT -->
<header class="mb-10 lg:px-40">
  <h1 class="text-white text-3xl font-bold pl-3">Directivas: if, for y switch</h1>
  <p class="text-gray-400 text-sm pl-3 pt-3">
    Ejercicios prácticos sobre la comunicación entre el código y la vista.
  </p>
</header>
<div class="flex flex-col lg:px-40 gap-10">
  <!-- card 1 : @if -->
  <section class="card-purple">
    <h2 class="text-xl font-semibold text-white mb-4 flex items-center gap-2">
      <span class="text-purple-400">&#64;if</span> Pulsar
    </h2>
    <p class="mb-5 text-slate-400 text-sm leading-relaxed">
      La directiv <span class="text-purple-400 font-mono">&#64;if</span> permite el renderizado
      condicional de elementos. El bloque de contenido solo se añade al DOM cuando la condición
      evaluada es verdadera, optimizando así el rendimiento.
    </p>
    <button
      (click)="toggleText()"
      class="w-40 py-2 p-3 bg-purple-700 hover:bg-purple-600 text-white rounded-lg font-medium transition-all active:scale-99"
    >
      {{ isVisibleText() ? 'Ocultar etiqueta' : 'Mostrar etiqueta' }}
    </button>
    @if (isVisibleText()) {
    <div
      class="p-4 bg-purple-500/10 border mt-5 border-purple-500/30 rounded-lg text-white animate-in zoom-in"
    >
      Muestra o oculta esta etiqueta cuando pulsamos en el enlace anterior.
    </div>
    }
  </section>

  <!-- card 2 : @for -->

  <section class="card-sky">
    <h2 class="text-xl font-semibold text-white mb-4 flex items-center gap-2">
      <span class="text-sky-400">&#64;for</span> Pulsar
    </h2>
    <p class="mb-5 text-slate-400 text-sm leading-relaxed">
      La directiva <span class="text-sky-400 font-mono">&#64;for</span> permite iterar sobre
      colecciones y renderizar un bloque por cada elemento. En cada iteración expones la variable
      del elemento (y opcionalmente el índice y flags como `first`/`last`), lo que facilita crear
      listas dinámicas. Ejemplo: <span class="font-mono">&#64;for(let item of items)</span>. Usa
      `trackBy` para mejorar el rendimiento en listas grandes.
    </p>

    <div class="w-full mx-auto grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
      @for (client of clients(); track client.id) {
      <div
        class="group relative bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm hover:shadow-xl transition-all duration-300 border border-slate-200 dark:border-slate-700 overflow-hidden"
      >
        <!-- Línea decorativa superior según estado -->
        <div
          class="absolute top-0 left-0 w-full h-1"
          [ngClass]="{
            'bg-emerald-500': client.status === 'Aprobado',
            'bg-amber-500': client.status === 'Pendiente'
          }"
        ></div>

        <div class="flex flex-col h-full">
          <!-- Icono de usuario y Estado -->
          <div class="flex items-start justify-between mb-4">
            <div
              class="p-3 bg-slate-100 dark:bg-slate-700 rounded-xl group-hover:bg-indigo-600 group-hover:text-white transition-colors duration-300"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2" />
                <circle cx="12" cy="7" r="4" />
              </svg>
            </div>
            <span
              class="px-3 py-1 rounded-full text-xs font-semibold flex items-center gap-1.5"
              [class]="
                client.status === 'Aprobado'
                  ? 'bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400'
                  : 'bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400'
              "
            >
              @if (client.status === 'Aprobado') {
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="12"
                height="12"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path d="M20 6 9 17l-5-5" />
              </svg>
              } @else {
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="12"
                height="12"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <circle cx="12" cy="12" r="10" />
                <polyline points="12 6 12 12 16 14" />
              </svg>
              }
              {{ client.status }}
            </span>
          </div>

          <div class="mb-4">
            <h3 class="font-bold text-lg leading-tight">{{ client.name }}</h3>
            <p class="text-sm text-slate-500 dark:text-slate-400">{{ client.role }}</p>
          </div>

          <!-- Detalles de Facturación -->
          <div class="mt-auto pt-4 border-t border-slate-100 dark:border-slate-700 space-y-3">
            <div class="flex items-center justify-between text-sm">
              <div class="flex items-center gap-2 text-slate-500 dark:text-slate-400">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="16"
                  height="16"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <line x1="12" x2="12" y1="2" y2="22" />
                  <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6" />
                </svg>
                <span>Cantidad</span>
              </div>
              <span class="font-bold text-slate-800 dark:text-slate-200">
                {{ client.amount | currency : 'EUR' : 'symbol' : '1.2-2' : 'es-ES' }}
              </span>
            </div>

            <div class="flex items-center justify-between text-sm">
              <div className="flex items-center gap-2 text-slate-500 dark:text-slate-400">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="16"
                  height="16"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="inline mr-1 text-slate-500"
                >
                  <rect width="18" height="18" x="3" y="4" rx="2" ry="2" />
                  <line x1="16" x2="16" y1="2" y2="6" />
                  <line x1="8" x2="8" y1="2" y2="6" />
                  <line x1="3" x2="21" y1="10" y2="10" />
                </svg>
                <span>Fecha</span>
              </div>
              <span class="text-slate-600 dark:text-slate-300">
                {{ client.date | date : 'dd MMM, yyyy' }}
              </span>
            </div>
          </div>
        </div>
      </div>
      }
    </div>
  </section>
</div>
