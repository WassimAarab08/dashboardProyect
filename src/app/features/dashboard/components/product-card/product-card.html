<!-- Contenedor Principal de la Tarjeta - Responsive -->
<div
  class="w-full max-w-sm sm:max-w-md md:max-w-lg lg:max-w-[360px] h-full flex flex-col mx-auto bg-gradient-to-br from-[#12121a] via-[#15151f] to-[#12121a] rounded-3xl overflow-hidden border border-white/10 transition-all duration-500 hover:border-emerald-500/30 hover:shadow-[0_20px_60px_rgba(16,185,129,0.15)] group relative"
>
  <!-- Secci贸n de Imagen: Grande y de alto impacto -->
  <div
    class="relative aspect-square sm:aspect-video md:aspect-square w-full bg-gradient-to-br from-[#0d0d12] to-[#1a1a24] overflow-hidden"
  >
    @if (product().oferta) {
      <div class="absolute top-3 left-3 sm:top-4 sm:left-4 md:top-5 md:left-5 z-20 animate-pulse">
        <span
          class="bg-gradient-to-r from-emerald-500 to-teal-500 text-[#0a0a0f] text-[9px] sm:text-[10px] font-black px-2.5 sm:px-3 py-1 sm:py-1.5 rounded-full uppercase tracking-widest shadow-[0_4px_16px_rgba(16,185,129,0.4)]"
        >
           Oferta
        </span>
      </div>
    }

    <!-- Badge de stock bajo -->
    @if (product().stock > 0 && product().stock < 10) {
      <div class="absolute top-3 right-3 sm:top-4 sm:right-4 md:top-5 md:right-5 z-20">
        <span
          class="bg-gradient-to-r from-orange-500 to-red-500 text-white text-[9px] sm:text-[10px] font-black px-2.5 sm:px-3 py-1 sm:py-1.5 rounded-full uppercase tracking-widest shadow-[0_4px_16px_rgba(249,115,22,0.4)]"
        >
          隆ltimas!
        </span>
      </div>
    }

    <img 
      [src]="product().imagen"
      [alt]="product().nombre"
      class="w-full h-full object-cover transition-all duration-700 group-hover:scale-100 group-hover:rotate-1"
    />

    <!-- Gradiente de integraci贸n visual mejorado -->
    <div
      class="absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent transition-all duration-500"
    ></div>
  </div>

  <!-- Cuerpo de Informaci贸n -->
  <div class="p-4 sm:p-6 md:p-8 relative z-10 flex flex-col flex-1">
    <!-- Fila Superior: Categor铆a y Valoraci贸n -->
    <div class="flex justify-between items-center mb-2 sm:mb-3">
      <span
        class="text-[9px] sm:text-[10px] font-bold text-emerald-400 tracking-[0.2em] uppercase bg-emerald-500/10 px-2 sm:px-2.5 py-1 rounded-md"
      >
        {{ product().categoria }}
      </span>
      <div
        class="flex items-center gap-1 sm:gap-1.5 bg-yellow-500/10 px-2 sm:px-2.5 py-1 rounded-md"
      >
        <svg class="w-3 h-3 sm:w-3.5 sm:h-3.5 text-yellow-500 fill-current" viewBox="0 0 20 20">
          <path
            d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"
          />
        </svg>
        <span class="text-xs sm:text-sm font-bold text-yellow-400">{{ product().valoracion }}</span>
      </div>
    </div>

    <!-- T铆tulo del Producto -->
    <h3
      class="text-lg sm:text-xl md:text-2xl font-bold text-white mb-4 sm:mb-5 md:mb-6 tracking-tight leading-tight group-hover:text-emerald-400 transition-colors duration-300 line-clamp-2 flex-grow"
    >
      {{ product().nombre }}
    </h3>

    <!-- Secci贸n Inferior: Precio y Acci贸n -->
    <div
      class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-4"
    >
      <div class="flex flex-col w-full sm:w-auto">
        <div class="flex items-baseline gap-2">
          <span class="text-2xl sm:text-3xl md:text-3xl font-black text-white tracking-tighter">
            {{ product().precio | currency: 'EUR' : 'symbol' : '1.2-2' }}
          </span>
          @if (product().oferta) {
            <span class="text-xs sm:text-sm text-slate-500 line-through">{{
              product().precio * 1.3 | currency: 'EUR' : 'symbol' : '1.2-2'
            }}</span>
          }
        </div>
        <div class="flex items-center gap-1.5 mt-1.5">
          <div
            [class]="
              'h-1.5 w-1.5 sm:h-2 sm:w-2 rounded-full shadow-lg ' +
              (product().stock > 0
                ? 'bg-emerald-500 shadow-emerald-500/50'
                : 'bg-red-500 shadow-red-500/50')
            "
          ></div>
          <span
            class="text-[9px] sm:text-[10px] font-bold uppercase tracking-widest"
            [class]="product().stock > 0 ? 'text-emerald-400' : 'text-red-400'"
          >
            {{ product().stock > 0 ? product().stock + ' disponibles' : 'Agotado' }}
          </span>
        </div>
      </div>

      <!-- Bot贸n de Acci贸n -->
      <button
        (click)="delete(product().id)"
        class="w-full sm:w-auto bg-red-600/50 text-white px-4 sm:px-5 md:px-6 py-2.5 sm:py-3 rounded-xl sm:rounded-2xl transition-all duration-300 active:scale-95 shadow-lg hover:shadow-red-500/30 flex items-center justify-center gap-2 group/btn font-bold disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:from-white disabled:hover:to-emerald-50 disabled:hover:text-black disabled:hover:shadow-lg"
      >
        <span class="text-[10px] sm:text-[11px] font-black uppercase tracking-wider">
          Eliminar
        </span>
      </button>
    </div>
  </div>
</div>
