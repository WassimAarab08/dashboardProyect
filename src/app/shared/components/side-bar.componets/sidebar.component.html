<svg xmlns="http://www.w3.org/2000/svg" class="hidden" style="display: none;">

  <symbol id="icon-data-binding" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
    <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25" />
  </symbol>

  <symbol id="icon-directivas" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
    <path stroke-linecap="round" stroke-linejoin="round" d="M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z" />
  </symbol>

  <symbol id="icon-comunicacion" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
    <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 6a7.5 7.5 0 107.5 7.5h-7.5V6z" />
    <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 10.5H21A7.5 7.5 0 0013.5 3v7.5z" />
  </symbol>

  <symbol id="icon-formularios" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
    <path stroke-linecap="round" stroke-linejoin="round" d="M11.35 3.836c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75 2.25 2.25 0 00-.1-.664m-5.8 0A2.251 2.251 0 0113.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25zM6.75 12h.008v.008H6.75V12zm0 3h.008v.008H6.75V15zm0 3h.008v.008H6.75V18z" />
  </symbol>

  <symbol id="icon-servicios" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
    <path stroke-linecap="round" stroke-linejoin="round" d="M15.042 21.672L13.684 16.6m0 0l-2.51 2.225.569-9.47 5.227 7.917-3.286-.672zm-7.518-.267A8.25 8.25 0 1120.25 10.5M8.288 14.212A5.25 5.25 0 1117.25 10.5" />
  </symbol>

  <symbol id="icon-modulos" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
    <path stroke-linecap="round" stroke-linejoin="round" d="M6.429 9.75L2.25 12l4.179 2.25m0-4.5l5.571 3 5.571-3m-11.142 0L2.25 7.5 12 2.25l9.75 5.25-4.179 2.25m0 0L21.75 12l-4.179 2.25m0 0l4.179 2.25L12 21.75 2.25 16.5l4.179-2.25m11.142 0l-5.571 3-5.571-3" />
  </symbol>

  <symbol id="icon-hostlistener" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
    <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 6.75h12M8.25 12h12M8.25 17.25h12M3 6.75h.007v.008H3V6.75zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zM3 12h.007v.008H3V12zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm-.375 5.25h.007v.008H3v-.008zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z" />
  </symbol>

  <symbol id="icon-http" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
    <path stroke-linecap="round" stroke-linejoin="round" d="M9 17.25v1.007a3 3 0 01-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0115 18.257V17.25m6-12V15a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 15V5.25m18 0A2.25 2.25 0 0018.75 3H5.25A2.25 2.25 0 003 5.25m18 0V12a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 12V5.25" />
  </symbol>

  <symbol id="icon-collapse" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
    <path stroke-linecap="round" stroke-linejoin="round" d="M18.75 19.5l-7.5-7.5 7.5-7.5m-6 15L5.25 12l7.5-7.5" />
  </symbol>

<symbol id="memory-alpha-w" viewBox="0 0 512 512" fill="currentColor">
  <path d="M403.119,270.381h-71.712l77.852-148.448c0.766-1.462,1.167-3.087,1.167-4.738V10.199C410.426,4.567,405.86,0,400.227,0 h-88.922c-3.763,0-7.221,2.072-8.996,5.392l-50.042,93.65H111.05c-5.633,0-10.199,4.567-10.199,10.199v120.732 c0,5.632,4.566,10.199,10.199,10.199h65.804L99.885,384.215c-0.79,1.479-1.203,3.129-1.203,4.807v112.779 c0,5.632,4.566,10.199,10.199,10.199h89.645c3.793,0,7.272-2.103,9.033-5.462l49.835-95.027h145.725 c5.633,0,10.199-4.567,10.199-10.199V280.58C413.319,274.948,408.752,270.381,403.119,270.381z M392.919,391.113H251.226 c-3.792,0-7.271,2.103-9.032,5.462l-49.835,95.027h-73.277V391.574l83.783-156.794c1.689-3.161,1.595-6.976-0.248-10.05 c-1.843-3.073-5.164-4.955-8.748-4.955h-72.619V119.441H258.38c3.765,0,7.222-2.073,8.996-5.392l50.042-93.65h72.608v94.286 l-84.518,161.16c-1.657,3.161-1.542,6.96,0.305,10.015c1.847,3.055,5.158,4.921,8.727,4.921h78.378V391.113z"></path>
  <path d="M329.434,357.992h-63.235c-5.633,0-10.199,4.567-10.199,10.199c0,5.632,4.566,10.199,10.199,10.199h63.235 c5.633,0,10.199-4.567,10.199-10.199C339.633,362.559,335.067,357.992,329.434,357.992z"></path>
  <path d="M369.211,357.992h-6.12c-5.633,0-10.199,4.567-10.199,10.199c0,5.632,4.566,10.199,10.199,10.199h6.12 c5.633,0,10.199-4.567,10.199-10.199C379.41,362.559,374.844,357.992,369.211,357.992z"></path>
</symbol>
</svg>

<!-- OVERLAY MÓVIL -->
@if (isMobileOpen()) {
  <div 
    class="fixed inset-0 bg-black/70 backdrop-blur-xl z-40 lg:hidden animate-in fade-in duration-300"
    (click)="closeMobileMenu()"
  ></div>
}

<!-- SIDEBAR PREMIUM -->
<aside 
  [class]="'fixed lg:static inset-y-0 left-0 z-50 flex flex-col h-screen transition-all duration-500 ease-out ' + 
           'bg-linear-to-b from-white via-slate-50/80 to-slate-100/50 dark:from-[#0f0f18] dark:via-[#0c0c14] dark:to-[#0a0a10] ' +
           'border-r border-slate-200 dark:border-emerald-500/10 pt-2 pl-3 ' +
           'shadow-[4px_0_24px_-2px_rgba(0,0,0,0.05)] dark:shadow-[4px_0_40px_-2px_rgba(16,185,129,0.08)] ' +
           (isCollapsed() ? 'w-20' : 'w-72') + ' ' + 
           (isMobileOpen() ? 'translate-x-0' : '-translate-x-full lg:translate-x-0')"
>
          <!-- HEADER SIDEBAR -->
          <div class="h-20 flex items-center px-5 border-b border-slate-200/60 dark:border-emerald-500/10">
            <div [class]="'flex items-center gap-3 transition-all duration-500 ' + (isCollapsed() ? 'w-full justify-center' : '')">
              <div class="relative shrink-0 group">
                <!-- Logo con efecto glow -->
                <div class="absolute inset-0 bg-emerald-500/30 rounded-xl blur-xl group-hover:bg-emerald-400/40 transition-all duration-500"></div>
                <div class="relative w-8 h-8 bg-linear-to-br from-emerald-400 via-emerald-500 to-teal-600 rounded-xl flex items-center justify-center shadow-lg shadow-emerald-500/25 group-hover:shadow-emerald-400/40 transition-all duration-300 group-hover:scale-105">
                  <svg class="w-5 h-5 text-black drop-shadow-sm" viewBox="0 0 30 30" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                    <use href="#memory-alpha-w"/>
                  </svg>
                </div>
              </div>
              @if (!isCollapsed()) {
                <div class="animate-in fade-in slide-in-from-left-2 duration-500">
                  <span class="font-black text-lg tracking-tight text-slate-800 dark:text-white">
                {{preAppName}}<span class="bg-linear-to-r from-emerald-500 to-teal-400 bg-clip-text text-transparent">{{postAppName}}</span>
                  </span>
                  <p class="text-[9px] font-semibold text-slate-400 dark:text-zinc-600 uppercase tracking-[0.2em] -mt-0.5">Version 1.0V</p>
                </div>
              }
            </div>
          </div>

          <!-- NAVEGACIÓN -->
          <nav class="flex-1 px-3 py-6 space-y-1.5 overflow-y-auto custom-scrollbar overflow-x-hidden">
            @for (item of menuItems; track item.id) {
              <a
                [routerLink]="item.route"
                routerLinkActive="active-link"
                #rla="routerLinkActive"
                (click)="closeMobileMenu()"
                [class]="'relative flex items-center w-full rounded-xl transition-all duration-300 group cursor-pointer ' + 
                         (isCollapsed() ? 'justify-center p-3' : 'px-4 py-3.5') + ' ' +
                         (rla.isActive 
                          ? 'bg-linear-to-r from-emerald-500/15 via-emerald-500/10 to-transparent dark:from-emerald-500/20 dark:via-emerald-500/10 dark:to-transparent text-emerald-600 dark:text-emerald-400 shadow-sm' 
                          : 'text-slate-500 dark:text-zinc-500 hover:bg-slate-100/80 dark:hover:bg-white/3 hover:text-slate-700 dark:hover:text-zinc-300')"
              >
                <!-- Indicador activo con glow -->
                @if (rla.isActive ) {
                  <div class="absolute left-0 top-2 bottom-2 w-1 bg-linear-to-b from-emerald-400 to-teal-500 rounded-r-full shadow-[0_0_12px_rgba(16,185,129,0.6)]"></div>
                }

                <!-- Iconos -->
                <div [class]="'shrink-0 flex items-center justify-center w-5 h-5 transition-all duration-300 '  + 
                              (rla.isActive ? 'scale-110' : 'group-hover:scale-110') " >
                  <svg class="w-full h-full" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <use [attr.href]="'#' + item.icon"/>
                  </svg>
                </div>
                
                @if (!isCollapsed()) {
                  <span class="ml-3 font-semibold text-[11px] uppercase tracking-wider transition-colors duration-300">
                    {{ item.label }}
                  </span>
                  
                  <!-- Badge para notificaciones (opcional) -->
               
                  <!-- <span class="ml-auto px-2 py-0.5 text-[9px] font-bold bg-emerald-500/20 text-emerald-500 rounded-full">3</span> -->
                  
                } @else {
                  <!-- Tooltip mejorado -->
                  <div class="absolute left-full ml-3 px-3 py-2 bg-slate-800 dark:bg-zinc-900 text-white text-[10px] font-semibold uppercase tracking-wider rounded-lg opacity-0 group-hover:opacity-100 transition-all duration-200 transform translate-x-2 group-hover:translate-x-0 pointer-events-none z-50 whitespace-nowrap shadow-xl border border-white/10">
                    {{ item.label }}
                    <div class="absolute left-0 top-1/2 -translate-x-1 -translate-y-1/2 w-2 h-2 bg-slate-800 dark:bg-zinc-900 rotate-45 border-l border-b border-white/10"></div>
                  </div>
                }
              </a>
            }
          </nav>

          <!-- SECCIÓN USUARIO -->
          @if (!isCollapsed()) {
            <div class="mx-3 mb-4 p-4 rounded-2xl bg-linear-to-br from-emerald-500/10 via-teal-500/5 to-transparent dark:from-emerald-500/15 dark:via-teal-500/10 dark:to-transparent border border-emerald-500/20 dark:border-emerald-500/10">
              <div class="flex items-center gap-3">
                <div class="relative">
                  <div class="w-10 h-10 rounded-xl bg-linear-to-br from-emerald-400 to-teal-500 flex items-center justify-center text-white font-bold text-sm shadow-lg shadow-emerald-500/20">
                    WA
                  </div>
                  <div class="absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-emerald-400 rounded-full border-2 border-white dark:border-[#0f0f18]"></div>
                </div>
                <div class="flex-1 min-w-0">
                  <p class="text-xs font-bold text-slate-800 dark:text-white truncate">Wassim Aarab</p>
                  <p class="text-[10px] text-slate-400 dark:text-zinc-500 truncate">Admin · Online</p>
                </div>
                <button class="p-1.5 text-slate-400 hover:text-emerald-500 transition-colors rounded-lg hover:bg-white/50 dark:hover:bg-white/5">
                  <svg class="w-3.5 h-3.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <use href="#icon-more"/>
                  </svg>
                </button>
              </div>
            </div>
          }

          <!-- FOOTER SIDEBAR -->
          <div class="p-3 border-t border-slate-200/60 dark:border-emerald-500/10">
            <button 
              (click)="toggleSidebar()"
              class="hidden lg:flex w-full  justify-center gap-2 px-3 py-2.5 rounded-xl text-slate-400 hover:text-emerald-500 hover:bg-slate-100/80 dark:hover:bg-white/3 transition-all duration-300"
            >
              @if (!isCollapsed()) {
                <span class="text-[10px] font-semibold uppercase tracking-wider"></span>
              }
              <svg [class]="'w-4 h-4 transition-transform duration-500 ' + (isCollapsed() ? 'rotate-180' : '')" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <use href="#icon-collapse"/>
              </svg>
            </button>
          </div>
        </aside>